# 画像クリック座標保存ツール

このツールは、OpenCVで表示した画像からマウスクリックにより手動で特徴点を選択し、ファイルに保存します。
また、特徴検出器により検出された特徴点・特徴線分をマウスクリックで選択し、その座標（特徴線分については端点の2つの座標）をファイルに保存することもできます。

特徴点検出には、Harrisオペレータ、特徴線分検出には、ハフ変換を用いている。（パラメータの設定はmain.pyで）

## 動作確認環境

- Ubuntu 18.04.6 LTS
- Python 3.13.2
- OpenCV
- NumPy

## 使い方
マウス左クリックで選択、ESCで選択した特徴をファイルに保存します。

また、d キーで最後に選択した特徴を削除することができます。

### 実行例
- 手動で特徴点を選択する場合
    - python main.py -i ./image/sample.png --op ./points.dat
- 手動で特徴点を選択する場合(ウィンドウサイズの指定)
    - python main.py -i ./image/sample.png --op ./points.dat --wsize 1000
- 検出された特徴から選択する場合（画像中心を原点とした座標に変換して保存）
    - python main.py -i ./image/sample.png --op ./points.dat --ol ./lines.dat --use_detector --shift

## オプション一覧
| オプション     | 説明 |
| :---           | :--- |
| -i             | 入力画像のパス（必須） |
| --wsize        | ウィンドウの最大サイズ |
| --op           | 特徴点データの出力先 |
| --ol           | 特徴線分データの出力先 |
| --shift        | 画像中心を原点とした座標に変換 |
| --use_detector | 特徴検出器の使用 |

### 補足
- モニター内にウィンドウが収まらない場合は`--wsize`でサイズ指定してください。ファイルに保存される座標は元画像の座標のため安心してください。
- `--use_detector` および `--shift` はフラグオプションです。
  これらを指定すると、それぞれの値が `True` になります（指定しない場合は `False`）。
- 特徴検出器を使用しない場合は、`--op` を指定してください。
- 特徴検出器を使用する場合は、`--op` または `--ol` のいずれか（または両方）を指定する必要があります。